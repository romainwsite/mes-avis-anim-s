 <!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Animation voiture + témoignages vidéo</title>

  <!-- 1) Charger GSAP et MotionPathPlugin depuis CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.0/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.0/MotionPathPlugin.min.js"></script>

  <style>
    /* Reset et styles de base */
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background:#000; overflow:hidden;
      height:100vh; position:relative;
      font-family:Arial,sans-serif;
      color:#fff;
    }
    /* Chemin SVG invisible */
    svg { position:absolute; width:0; height:0; }
    #route { fill:none; stroke:transparent; }

    /* La voiture */
    #car {
      position:absolute; top:0; left:0;
      width:100px; /* ajustable */
    }

    /* Conteneur vidéo centré */
    #video-container {
      position:absolute; top:50%; left:50%;
      transform:translate(-50%,-50%);
      width:80%; max-width:800px;
    }
    #testimonial {
      width:100%; box-shadow:0 0 20px rgba(0,0,0,0.5);
    }

    /* Bouton flèche */
    .arrow {
      position:absolute; bottom:20px; right:20px;
      padding:12px 18px; background:#fff; color:#000;
      border:none; border-radius:4px;
      font-size:18px; cursor:pointer;
      user-select:none;
    }
  </style>
</head>
<body>

  <!-- 2) Trajectoire de la voiture dans un SVG invisible -->
  <svg>
    <path id="route" d="M100,300 C300,100 500,500 700,300" />
  </svg>

  <!-- 3) La voiture -->
  <img id="car" src="assets/ma-voiture.png" alt="Voiture">

  <!-- 4) Lecteur vidéo -->
  <div id="video-container">
    <video id="testimonial" controls autoplay>
      <source id="videoSource" src="" type="video/mp4">
      Votre navigateur ne supporte pas la vidéo.
    </video>
  </div>

  <!-- 5) Bouton “Suivant” -->
  <button class="arrow">→ Suivant</button>

  <!-- 6) Script d’animation -->
  <script>
    gsap.registerPlugin(MotionPathPlugin);

    // Liste des vidéos (dans assets/videos/)
    const videos = [
      'assets/videos/avis1.mp4',
      'assets/videos/avis2.mp4',
      'assets/videos/avis3.mp4',
      'assets/videos/avis4.mp4'
    ];
    let currentIndex = 0;

    // Références au player et à sa source
    const vid = document.getElementById('testimonial');
    const src = document.getElementById('videoSource');

    // Charge la première vidéo
    src.src = videos[currentIndex];
    vid.load();

    // Prépare l’animation GPS
    const carAnim = gsap.to('#car', {
      duration: 1,
      ease: 'power1.inOut',
      motionPath: {
        path: '#route',
        align: '#route',
        alignOrigin: [0.5, 0.5],
        autoRotate: true
      },
      paused: true
    });

    // Au clic sur la flèche, anime puis change la vidéo
    document.querySelector('.arrow').addEventListener('click', e => {
      e.preventDefault();
      carAnim.restart();
      carAnim.eventCallback('onComplete', () => {
        currentIndex = (currentIndex + 1) % videos.length;
        src.src = videos[currentIndex];
        vid.load();
        vid.play();
      });
    });
  </script>
</body>
</html>

